OpenAI 提供的 function calling 功能，很多时候被我用来实现 NER 实体提取，但除此之外还有很多种方法来实现一个 json 的输出。

这些方法很难保证 100% 的有效，针对不同的 llm 模型也要使用不同的提示词才能得到相对最好的结果。不过这里面还是有一些技巧的。

通常来说如果想要获得一个稳定的 json 输出，我们可以遵循如下步骤

1. 用结构化的方式来描述出你需要的 json 结构是什么样，包括每个字段的名字 key 应该叫什么，它的含义是什么。
2. 可以配合 yaml 等格式强化对你预期的结构的描述。
3. 给 llm 打样，教会它。
4. 强制约定格式输出。
5. 在获得输出后进行校验和筛查过滤，简单的问题直接处理，复杂的，或者回答牛头不对马嘴的，打回重来。

